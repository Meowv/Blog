layui.config({base:"./lib/winui/",version:"1.0.0-beta"}).extend({window:"js/winui.window",desktop:"js/winui.desktop",start:"js/winui.start",helper:"js/winui.helper"}).define(["window","desktop","start","helper"],function(n){function i(n){var i=t(n),u=i.attr("win-url"),f=i.attr("win-title"),e=i.attr("win-id"),o=parseInt(i.attr("win-opentype")),s=parseInt(i.attr("win-maxopen"))||-1,r;if(u=="theme"){winui.window.openTheme();return}if(!u||!f||!e){winui.window.msg("菜单配置错误（菜单链接、标题、id缺一不可）");return}o===1?t.ajax({type:"get",url:u,async:!1,success:function(n){r=n},error:function(n){var i="";switch(n.status){case 404:i="404.html";break;case 500:i="500.html";break;default:r="打开窗口失败"}t.ajax({type:"get",url:"views/error/"+i,async:!1,success:function(n){r=n},error:function(){layer.close(load)}})}}):r=u;winui.window.config({anim:0,miniAnim:0,maxOpen:-1}).open({id:e,type:o,title:f,content:r,maxOpen:s})}var t=layui.jquery;t(function(){winui.window.msg("Welcome To WinAdmin",{time:4500,offset:"40px",btn:["点击进入全屏"],btnAlign:"c",yes:function(n){winui.fullScreen(document.documentElement);layer.close(n)}});winui.config({settings:layui.data("winui").settings||{color:32,taskbarMode:"bottom",startSize:"sm",bgSrc:"images/bg_01.jpg",lockBgSrc:"images/bg_04.jpg"},desktop:{options:{},done:function(n){n.ondblclick(function(n,t){i(t)});n.contextmenu({item:["打开","删除","右键菜单可自定义"],item1:function(n,t){i(t)},item2:function(n,i,r){winui.window.msg("删除回调");t(i).remove();r.reLocaApp()},item3:function(){winui.window.msg("自定义回调")}})}},menu:{options:{url:"json/allmenu.json",method:"get",data:{nihaoa:""}},done:function(n){n.onclick(function(n){i(n)});n.contextmenu({item:[{icon:"fa-cog",text:"设置"},{icon:"fa-close",text:"关闭"},{icon:"fa-qq",text:"右键菜单可自定义"}],item1:function(n,t){console.log(n);console.log(t)},item2:function(){},item3:function(){winui.window.msg("自定义回调")}})}}}).init({audioPlay:!1,renderBg:!0},function(){})});t(".winui-tile").on("click",function(){i(this)});t(".winui-start-item.winui-start-individuation").on("click",function(){winui.window.openTheme()});t(".logout").on("click",function(){winui.hideStartMenu();winui.window.confirm("确认注销吗?",{icon:3,title:"提示"},function(n){winui.window.msg("执行注销操作，返回登录界面");layer.close(n)})});window.localStorage.getItem("lockscreen")=="true"&&winui.lockScreen(function(n){return n==="winadmin"?!0:(winui.window.msg("密码错误",{shift:6}),!1)});winui.helper.addTool([{tips:"锁屏",icon:"fa-power-off",click:function(){winui.lockScreen(function(n){return n==="winadmin"?!0:(winui.window.msg("密码错误",{shift:6}),!1)})}},{tips:"切换壁纸",icon:"fa-television",click:function(){layer.msg("这个是自定义的工具栏",{zIndex:layer.zIndex})}}]);n("index",{})});